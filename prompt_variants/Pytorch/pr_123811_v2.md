**Task:**
You are an automated coding agent. Reduce unnecessary recompilations in `torch.compile` and add tests.

**Repo Link:**
[https://github.com/pytorch/pytorch](https://github.com/pytorch/pytorch)

**Problem Statement:**
Fix a bug where `torch.compile(dynamic=True)` still recompiles too often when input sizes change in a way that should be handled dynamically (e.g., shape-dependent tensor creation). Add a regression test that demonstrates the issue and verifies itâ€™s fixed.

**Deliverable:**
Generate a standard **git-style patch file** (unified diff, i.e., .patch file) that implements the feature and adds/updates the necessary tests.
